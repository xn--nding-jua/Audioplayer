/*!
* round-slider v2.0.0-alpha
*
* @website https://roundsliderui.com/
* @copyright (c) 2015-2022 Soundar
* @license MIT
*/

!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?t(require("jquery")):t(jQuery)}(function(d){"use strict";var o="roundSlider";function h(t,e){this.id=t.id,this.control=d(t),this._initialOptions=d.isPlainObject(e)?e:{},this.options=d.extend({},this.defaults,this._initialOptions),this._saveInstanceOnElement(t),!1!==this._raise("beforeCreate")?(this._init(),this._raise("create")):this._removeData()}d.fn[o]=function(t){return function(t,e){for(var i=0;i<this.length;i++){var s=this[i],a=d.data(s,o);if(a?d.isPlainObject(t)&&a.set(t):a=new h(s,t),"string"==typeof t){"option"===e[0]&&Array.prototype.shift.call(e);var n,r=e[0];if(Object.prototype.hasOwnProperty.call(a.options,r)){s=e[1];if(n=a.set(r,s),void 0===s)return n}else if("function"==typeof a[r]){if(n=a[r](e[1],e[2]),0===r.indexOf("get"))return n}else d.isPlainObject(r)&&a.set(r)}}return this}.call(this,t,arguments)},h.prototype={pluginName:o,version:"2.0.0-alpha",options:{},control:null,defaults:{min:0,max:100,step:1,value:null,radius:85,width:18,pathWidth:"+0",rangeWidth:"+0",handleSize:"+0",startAngle:0,endAngle:"+360",animation:!0,showTooltip:!0,editableTooltip:!0,readOnly:!1,disabled:!1,keyboardAction:!0,mouseScrollAction:!1,lineCap:"butt",sliderType:"min-range",circleShape:"full",handleShape:"round",startValue:null,allowInvertedRange:!1,handleRotation:!1,snapToStep:!0,svgMode:!0,borderWidth:1,borderVisibility:"both",borderColor:"#AAA",pathColor:"#FFF",rangeColor:"#54BBE0",handleColor:null,tooltipColor:null,beforeCreate:null,create:null,start:null,beforeValueChange:null,drag:null,change:null,update:null,valueChange:null,stop:null,tooltipFormat:null},keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39},_props:function(){return{numberType:["min","max","step","radius","width","borderWidth","startAngle","startValue"],booleanType:["animation","showTooltip","editableTooltip","readOnly","disabled","keyboardAction","mouseScrollAction","svgMode","allowInvertedRange","handleRotation","snapToStep"],stringType:["value","handleSize","endAngle","sliderType","circleShape","handleShape","lineCap","borderVisibility"]}},_init:function(){var t,e=this.options;e.svgMode&&(this._appendSeperator=t=function(){},this._refreshSeperator=t,this._updateSeperator=t,this._appendOverlay=t,this._checkOverlay=t,this._updateWidth=t),this.control.is("input")&&(this._isInputType=!0,this._hiddenField=this.control,this.control=this._createElement("div"),this.control.insertAfter(this._hiddenField),e.value=this._hiddenField.val()||e.value),this._isBrowserSupported()&&this._onInit()},_onInit:function(){this._initialize(),this._update(),this._render(),this._checkDeprecated()},_initialize:function(){this.control.addClass(this._getBrowserName()),this._isReadOnly=!1,this._checkDataType(),this._refreshCircleShape()},_render:function(){this.container=this._createElement("div.rs-container"),this.innerContainer=this._createElement("div.rs-inner-container"),this.container.append(this.innerContainer);var t="rs-control "+(this.options.svgMode?"rs-svg-mode":"rs-classic-mode");this.control.addClass(t).empty().append(this.container),this._createLayers(),this._createOtherLayers(),this._setContainerClass(),this._setRadius(),this._setProperties(),this._setValue(),this._updateTooltipPos(),this._bindControlEvents("_bind"),this._raiseValueChange("create"),this._updatePre()},_update:function(){this._validateSliderType(),this._updateStartEnd(),this._validateStartEnd(),this._active=1,this._handle1=this._handle2=this._handleDefaults(),this._analyzeModelValue()},_createLayers:function(){var t=this.options;if(t.svgMode)return this._createSVGElements(),this._updateSliderThickness(),this._setSVGAttributes(),this._setSVGStyles(),void this._moveSliderRange(!0);this.block=this._createElement("div.rs-block rs-outer rs-border"),this.innerContainer.append(this.block);var e=t.width,i=this._start,t=this._createElement("div.rs-path rs-transition");this._showRange?(this.block1=t.clone().addClass("rs-range-color").rsRotate(i),this.block2=t.clone().addClass("rs-range-color").css("opacity","0").rsRotate(i),this.block3=t.clone().addClass("rs-path-color").rsRotate(i),this.block4=t.addClass("rs-path-color").css({opacity:"1","z-index":"1"}).rsRotate(i-180),this.block.append(this.block1,this.block2,this.block3,this.block4).addClass("rs-split")):this.block.append(t.addClass("rs-path-color")),this.lastBlock=this._createElement("span.rs-block").css({padding:e}),this.innerBlock=this._createElement("div.rs-inner rs-bg-color rs-border"),this.lastBlock.append(this.innerBlock),this.block.append(this.lastBlock)},_createOtherLayers:function(){this._appendHandle(),this._appendSeperator(),this._appendOverlay(),this._appendHiddenField()},_setProperties:function(){var t=this.options;this._setHandleShape(),this._addAnimation(),this._appendTooltip(),t.showTooltip||this._removeTooltip(),t.disabled?this.disable():t.readOnly&&this._readOnly(!0),t.mouseScrollAction&&this._bindScrollEvents("_bind")},_updatePre:function(){this._prechange=this._predrag=this._pre_bvc=this._preValue=this.options.value},_setValue:function(){var t;this._rangeSlider?(this._setHandleValue(1),this._setHandleValue(2)):(this._minRange&&!this.options.svgMode&&this._setHandleValue(1),t=this._minRange?2:this._active||1,this._setHandleValue(t))},_setHandleValue:function(t){this._active=t;t=this["_handle"+t];this._minRange||(this.bar=this._activeHandleBar()),this._changeSliderValue(t.value,t.angle)},_appendTooltip:function(){var t=this.tooltip=this._createElement("span.rs-tooltip rs-tooltip-text");this.container.append(t),this._setTooltipColor(t),this._tooltipEditable(),this._updateTooltip()},_removeTooltip:function(){this.tooltip&&this.tooltip.remove(),delete this.tooltip},_setTooltipColor:function(t){var e,i;t&&("inherit"==(i=(e=this.options).tooltipColor||"")&&(i=e.rangeColor),t.css("color",i))},_tooltipEditable:function(){var t=this.options,e=this.tooltip;e&&t.showTooltip&&this[t.editableTooltip?(e.addClass("rs-editable"),"_bind"):(e.removeClass("rs-editable"),"_unbind")](e,"click",this._editTooltip)},_editTooltip:function(){var t,e=this.tooltip;e.hasClass("rs-editable")&&!this._isReadOnly&&(t=2*parseFloat(e.css("border-left-width")),t=this.input=this._createElement("input.rs-input rs-tooltip-text").css({height:e.outerHeight()-t,width:e.outerWidth()-t}),this._setTooltipColor(t),e.html(t).removeClass("rs-editable").addClass("rs-hover"),t.focus().val(this._getTooltipValue(!0)),this._bind(t,"blur change",this._focusOut))},_focusOut:function(t){"change"==t.type?(","==(t=this.input.val().trim().replace("-",","))[0]&&(t="-"+t.slice(1).replace("-",",")),this.options.value=t,this._validateValue(!0)&&(this.input.val(this._getTooltipValue(!0)),this._raiseEvent("change"))):(delete this.input,this.tooltip.addClass("rs-editable").removeClass("rs-hover"),this._updateTooltip())},_setHandleShape:function(t){var e=this.options.handleShape,i="rs-handle-",s=this._handles();s.removeClass(i+t).addClass(i+e),"dot"==e?s.append(this._createElement("div."+i+e+"-inner")):s.empty(),this._setHandleColor()},_setHandleColor:function(){var t=this.options,e=t.handleColor||"",i=t.handleShape,s=this._handles();"inherit"==e&&(e=t.rangeColor),"dot"==i?s.css({"border-color":e,background:""}).children().css("background",e):s.css({"border-color":"",background:e})},_addAnimation:function(){this.options.animation&&this.control.addClass("rs-animation")},_removeAnimation:function(){this.control.removeClass("rs-animation")},_setContainerClass:function(){var t=this.options.circleShape,e=" rs-",i=e;this._isFullCircle?i+=t+" rs-full":i+=t.split("-").join(e),this.container.addClass(i)},_setRadius:function(){var t,e,i,s=this.options,a=s.radius,n=2*a,r=s.circleShape,o=0,h=t=n,l=e=n;if(s.svgMode&&!this._isFullCircle&&(i=this._handleBars(),"none"!=s.lineCap?(o=("butt"===s.lineCap?s.borderWidth:this.sliderThickness)/2,-1!=r.indexOf("bottom")&&i.css("margin-top",o+"px"),-1!=r.indexOf("right")&&i.css("margin-right",-o+"px")):d.each(i,function(t,e){e.style.removeProperty("margin-top"),e.style.removeProperty("margin-right")})),0===r.indexOf("half"))switch(r){case"half-top":case"half-bottom":t=(h=a)+o;break;case"half-left":case"half-right":e=(l=a)+o}else 0===r.indexOf("quarter")&&(t=e=(h=l=a)+o);this.container.css({height:h,width:l}),this.control.css({height:t,width:e}),0!==o?this.innerContainer.css({height:t,width:e}):this.innerContainer.removeAttr("style"),s.svgMode&&this.svgContainer.height(n).width(n).children("svg").height(n).width(n)},_border:function(t){return t?parseFloat(this._startLine.children().css("border-bottom-width")):2*parseFloat(this.block.css("border-top-width"))},_appendHandle:function(){!this._rangeSlider&&this._minRange||this._createHandle(1),this._showRange&&this._createHandle(2)},_appendSeperator:function(){this._startLine=this._addSeperator(this._start,"rs-start"),this._endLine=this._addSeperator(this._end,"rs-end"),this._refreshSeperator()},_addSeperator:function(t,e){var i=this._createElement("span.rs-seperator rs-border"),t=this._createElement("span.rs-bar rs-transition "+e).append(i).rsRotate(t);return this.container.append(t),t},_refreshSeperator:function(){var t=this._startLine.add(this._endLine),e=t.children().removeAttr("style"),i=this.options,s=i.width+this._border();"round"==i.lineCap&&"full"!=i.circleShape?(t.addClass("rs-rounded"),e.css({width:s,height:s/2+1}),this._startLine.children().css("margin-top",-1).addClass(this._minRange?"rs-range-color":"rs-path-color"),this._endLine.children().css("margin-top",s/-2).addClass("rs-path-color")):(t.removeClass("rs-rounded"),e.css({width:s,"margin-top":this._border(!0)/-2}).removeClass("rs-range-color rs-path-color"))},_updateSeperator:function(){this._startLine.rsRotate(this._start),this._endLine.rsRotate(this._end)},_createHandle:function(t){var e=this._createElement("div.rs-handle rs-transition");e.attr({index:t,tabindex:"0"});var i=this._dataElement()[0].id,s=(i=i?i+"_":"")+"handle";this._rangeSlider&&(s+="_"+(1==t?"start":"end")),e.attr({role:"slider","aria-label":s});i=this._handleDefaults(),s=this._createElement("div.rs-bar rs-transition").css("z-index","7").append(e);return s.addClass(this._rangeSlider&&2==t?"rs-second":"rs-first"),s.rsRotate(i.angle),this.options.handleRotation&&e.rsRotate(-i.angle),this.container.append(s),this._updateHandleSize(),this.bar=s,1!=(this._active=t)&&2!=t&&(this["_handle"+t]=i),this._bind(e,"focus blur",this._handleFocus),e},_defaultValue:function(){var t=this.options,e=t.startValue;return this._isNumber(e)?this._limitValue(e):t.min},_handleDefaults:function(){var t=this._defaultValue();return{angle:this._valueToAngle(t),value:t}},_handleBars:function(){return this.container.children("div.rs-bar")},_handles:function(){return this._handleBars().find(".rs-handle")},_activeHandleBar:function(t){return this._minRange?this.bar:(t=null!=t?t:this._active,d(this._handleBars()[t-1]))},_updateHandleBar:function(t){this.bar=t.parent(),this._active=parseFloat(t.attr("index"))},_getHandleEle:function(t){if(t.hasClass("rs-handle"))return t;t=t.parent();return t.hasClass("rs-handle")?t:null},_handleArgs:function(t){var e=this["_handle"+(t=null!=t?t:this._active)]||{};return{element:this._activeHandleBar(t).children(),index:t,isActive:t==this._active,value:e.value,angle:e.angle}},_dataElement:function(){return this._isInputType?this._hiddenField:this.control},_raiseEvent:function(t){var e,i=this["_pre"+t],s=this.options.value;i!==s&&(this["_pre"+t]=s,"change"==t&&(this._predrag=s,this._updateHidden()),this._updateTooltip(),e=this._handleArgs(),this._raise(t,{preValue:i,handle:e}),s!=this._preValue&&(this._raise("update",{preValue:i,handle:e,action:t}),this._raiseValueChange(t)))},_raiseBeforeValueChange:function(t,e,i){var s=this.options,a=this._active;void 0!==e?this._rangeSlider&&(e=this._formRangeValue(e)):(e=s.value,i=this["_handle"+a].angle);var n="code"!==t;if(e===this._pre_bvc)return!n||!s.snapToStep&&i!==this["_pre_bvc_ang_h"+a]&&(this["_pre_bvc_ang_h"+a]=i,!0);n={value:e,preValue:this._pre_bvc,action:t,isUserAction:n,cancelable:!0},n=0!=this._raise("beforeValueChange",n);return n&&(this._pre_bvc=e),n},_raiseValueChange:function(t){var e=this.options.value,i=[];this._minRange||i.push(this._handleArgs(1)),this._showRange&&i.push(this._handleArgs(2));i={value:e,preValue:this._preValue,action:t,isUserAction:"code"!==t&&"create"!==t,isInvertedRange:this._isInvertedRange,handles:i};this._raise("valueChange",i),this._preValue=e},_elementDown:function(t){var e,i,s,a,n,r,o;this._isReadOnly||((n=this._getHandleEle(d(t.target)))?(t.preventDefault(),this._handleDown(n)):(o=this._getXY(t),a=this._getCenterPoint(),e=this.options,s=this._getDistance(o,a),i=e.width+2*e.borderWidth,n=this.sliderThickness-i,(n=e.radius-n/2)-i<=s&&s<=n&&(0!==(s=this.control.find(".rs-handle.rs-focus")).length&&t.preventDefault(),t=(n=this._getAngleValue(o,a)).angle,o=n.value,this._rangeSlider&&(a=this._handle1.angle,n=this._handle2.angle,1==s.length?(r=parseFloat(s.attr("index")),e.allowInvertedRange||(1==r&&n<t?r=2:2==r&&t<a&&(r=1))):r=t<(a+n)/2?1:2,this._active=r,this.bar=this._activeHandleBar()),this._raiseBeforeValueChange("change",o,t)&&(this._changeSliderValue(o,t),this._raiseEvent("change")))))},_handleDown:function(t){t.focus(),this._removeAnimation(),this._bindMouseEvents("_bind"),this._updateHandleBar(t),this.control.addClass("rs-dragging"),this._raise("start",{handle:this._handleArgs()})},_handleMove:function(t){t.preventDefault();var e=this._getXY(t),t=this._getCenterPoint(),e=this._getAngleValue(e,t,!0),t=e.angle,e=e.value;this._raiseBeforeValueChange("drag",e,t)&&(this._changeSliderValue(e,t),this._raiseEvent("drag"))},_handleUp:function(){this.control.removeClass("rs-dragging"),this._bindMouseEvents("_unbind"),this._addAnimation(),this._raiseEvent("change"),this._raise("stop",{handle:this._handleArgs()})},_handleFocus:function(t){var e;this._isReadOnly||(this._handles().removeClass("rs-focus"),(e=this.options.keyboardAction)&&this._bindKeyboardEvents("_unbind"),"blur"!==t.type&&((t=d(t.target)).addClass("rs-focus"),this._updateHandleBar(t),e&&this._bindKeyboardEvents("_bind"),this.control.find("div.rs-bar").css("z-index","7"),this.bar.css("z-index","8")))},_handleKeyDown:function(t){var e,i,s=t.keyCode,a=this.keys;27==s&&this._handles().blur(),35<=s&&s<=40&&(37<=s&&s<=40&&this._removeAnimation(),e=this["_handle"+this._active],t.preventDefault(),s==a.UP||s==a.RIGHT?i=this._round(this._limitValue(e.value+this.options.step)):s==a.DOWN||s==a.LEFT?i=this._round(this._limitValue(e.value-this._getMinusStep(e.value))):36==s?i=this._getKeyValue("Home"):35==s&&(i=this._getKeyValue("End")),s=this._valueToAngle(i),this._raiseBeforeValueChange("drag",i,s)&&(this._changeSliderValue(i,s),this._raiseEvent("drag")))},_handleKeyUp:function(){this._addAnimation(),this._raiseEvent("change")},_getMinusStep:function(t){var e=this.options,i=e.min,s=e.max,e=e.step;if(t!=s)return e;i=(s-i)%e;return 0==i?e:i},_getKeyValue:function(t){var e=this.options,i=e.min,e=e.max;return this._rangeSlider?"Home"==t?1==this._active?i:this._handle1.value:1==this._active?this._handle2.value:e:"Home"==t?i:e},_elementScroll:function(t){var e;this._isReadOnly||(t.preventDefault(),0!=(e=(e=t.originalEvent||t).wheelDelta?e.wheelDelta/60:e.detail?-e.detail/2:0)&&(this._updateActiveHandle(t),e=(t=this["_handle"+this._active]).value+(0<e?this.options.step:-this._getMinusStep(t.value)),e=this._limitValue(e),t=this._valueToAngle(e),this._raiseBeforeValueChange("change",e,t)&&(this._removeAnimation(),this._changeSliderValue(e,t),this._raiseEvent("change"),this._addAnimation())))},_updateActiveHandle:function(t){var e=d(t.target),t=this._getHandleEle(e);t&&e.parents(".rs-control")[0]==this.control[0]&&this._updateHandleBar(t);t=this.bar.children();t.hasClass("rs-focus")||t.focus()},_bindControlEvents:function(t){this[t](this.control,"mousedown touchstart",this._elementDown)},_bindScrollEvents:function(t){this[t](this.control,"mousewheel DOMMouseScroll",this._elementScroll)},_bindMouseEvents:function(t){var e=d(document);this[t](e,"mousemove touchmove",this._handleMove),this[t](e,"mouseup mouseleave touchend touchcancel",this._handleUp)},_bindKeyboardEvents:function(t){var e=d(document);this[t](e,"keydown",this._handleKeyDown),this[t](e,"keyup",this._handleKeyUp)},_changeSliderValue:function(t,e){var i,s,a,n=this._active,r=this.options;this._showRange?(a=1==n&&e<=this._handle2.angle||2==n&&e>=this._handle1.angle,i=r.allowInvertedRange,(this._minRange||a||i)&&(this["_handle"+n]={angle:e,value:t},r.value=this._rangeSlider?this._handle1.value+","+this._handle2.value:t,this._moveHandle(e,t),r.svgMode?this._moveSliderRange():(s="1",a="0",(i=this._handle2.angle-this._handle1.angle)<=180&&!(i<0&&-180<i)&&(s="0",a="1"),this.block2.css("opacity",s),this.block3.css("opacity",a),(1==n?this.block4:this.block2).rsRotate(e-180),(1==n?this.block1:this.block3).rsRotate(e)))):(this["_handle"+n]={angle:e,value:t},r.value=t,this._moveHandle(e,t))},_moveHandle:function(t,e){var i=this.options.handleRotation?-t:null;this.bar.rsRotate(t).children().rsRotate(i),this._updateARIA(e)},_createSVGElements:function(){var t=this.$svgEle=this._createSVG("svg"),e="path.rs-transition ";this.$pathEle=this._createSVG(e+"rs-path"),this.$rangeEle=this._showRange?this._createSVG(e+"rs-range"):null,this.$borderEle=this._createSVG(e+"rs-border"),this._append(t,[this.$pathEle,this.$rangeEle,this.$borderEle]),this.svgContainer=this._createElement("div.rs-svg-container").append(t).appendTo(this.innerContainer)},_setSVGAttributes:function(){var t=this.options,e=t.radius,i=t.borderWidth,s=t.width,a=t.lineCap,n=t.borderVisibility,r=this.centerRadius=e-this.sliderThickness/2,o=(s+i)/2,t=r+o,e=r-o,s=this._start,o=this._end;this.svgPathLength=this._getArcLength(r),"outer"===n?e=t:"inner"===n&&(t=e);e=this._drawPath(s,o,t,e);this._setAttribute(this.$borderEle,{d:e}),d(this.$borderEle).css("stroke-width",i);r={d:this._drawPath(s,o,r),"stroke-width":this._pathWidth,"stroke-linecap":a};this._setAttribute(this.$pathEle,r),this._showRange&&(r["stroke-width"]=this._rangeWidth,this._setAttribute(this.$rangeEle,r),"round"==a||"square"==a?this.$rangeEle.setAttribute("stroke-dashoffset","0.01"):this.$rangeEle.removeAttribute("stroke-dashoffset"))},_updateSliderThickness:function(){var t=this.options,e=t.width,i=e+2*t.borderWidth,s=this._pathWidth=this._calcRelativeValue(t.pathWidth,e),e=this._rangeWidth=this._calcRelativeValue(t.rangeWidth,e);this.sliderThickness=Math.max(i,s,e)},_getArcLength:function(t){return 2*Math.PI*t*(this._arcLength/360)},_getArcAngle:function(t,e){return null==e&&(e=this.centerRadius),360*t/(2*Math.PI*e)},_setSVGStyles:function(){var t=this.options,e=t.borderColor||"",i=t.pathColor||"",t=t.rangeColor||"";"inherit"==e&&(e=t),d(this.$borderEle).css("stroke",e),this.svgContainer["inherit"==i?"addClass":"removeClass"]("rs-path-inherited"),"inherit"==i&&(i=t),d(this.$pathEle).css("stroke",i),this._showRange&&d(this.$rangeEle).css("stroke",t),this._setHandleColor()},_moveSliderRange:function(t){var e,i,s,a,n;this._showRange&&(e=this._start,n=this._arcLength,i=this._handle1.angle,s=this._handle2.angle,t&&(i=s=this._handleDefaults().angle),t=[],e=(i-=e)<=(s-=e),this._isInvertedRange=!e,e?t.push(0):(this._minRange&&t.push(0),a=i,i=s,s=a),a=i/n*this.svgPathLength,t.push(a),n=(s-i)/n*this.svgPathLength,t.push(n,Math.ceil(this.svgPathLength)),this.$rangeEle.style.strokeDasharray=t.join(" "))},_isPropsRelatedToSVG:function(t){return this._hasProperty(t,["radius","width","pathWidth","rangeWidth","borderWidth","borderVisibility","lineCap","startAngle","endAngle"])},_isPropsRelatedToSVGStyles:function(t){return this._hasProperty(t,["borderColor","pathColor","rangeColor","handleColor"])},_hasProperty:function(t,e){return"string"==typeof t?-1!==e.indexOf(t):Object.keys(t).some(function(t){return-1!==e.indexOf(t)})},_updateARIA:function(t){var e=this.options,i=e.min,s=e.max;this.bar.children().attr({"aria-valuenow":t}),this._rangeSlider?((e=this._handles()).eq(0).attr({"aria-valuemin":i}),e.eq(1).attr({"aria-valuemax":s}),1==this._active?e.eq(1).attr({"aria-valuemin":t}):e.eq(0).attr({"aria-valuemax":t})):this.bar.children().attr({"aria-valuemin":i,"aria-valuemax":s})},_getDistance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},_getXY:function(t){return{x:(t=-1==t.type.indexOf("mouse")?(t.originalEvent||t).changedTouches[0]:t).pageX,y:t.pageY}},_getCenterPoint:function(){var t=(this.block||this.svgContainer).offset(),e=this.options.radius;return{x:t.left+e,y:t.top+e}},_getAngleValue:function(t,e,i){t=-Math.atan2(t.y-e.y,e.x-t.x)/(Math.PI/180);return t<0&&(t+=360),t<this._start&&(t+=360),t=this._checkAngle(t,i),this._processStepByAngle(t)},_checkAngle:function(t,e){var i=this["_handle"+this._active].angle,s=this._start,a=this._end;if(a<t){if(!e){var n=this.options;if("round"===n.lineCap||"square"===n.lineCap){n=n.width/2+n.borderWidth,n=this._getArcAngle(n);if(s+360-n<t)return s;if(t<a+n)return a}return i}t=i<(s+a)/2?s:a}else if(e){e=this._handleDragDistance;if(this._isNumber(e)){i=t-i;if(Math.abs(i)>this._arcLength-e)return 0<i?s:a}}return t},_processStepByAngle:function(t){var e=this.options,i=this._angleToValue(t),i=this._processStepByValue(i);return{value:i,angle:e.snapToStep?this._valueToAngle(i):t}},_processStepByValue:function(t){var e=this.options,i=e.min,s=e.max,a=e.step,e=s<i,s=t-(t-i)%(a=e?-a:a),i=this._limitValue(s+a),a=(s+i)/2,i=(e?a<t:t<a)?s:i;return this._round(i)},_round:function(t){var e=this.options.step.toString().split(".");return e[1]?parseFloat(t.toFixed(e[1].length)):Math.round(t)},_limitValue:function(t){var e=this.options,i=e.min,s=e.max,a=s<i,e=a?s:i,s=a?i:s;return t=s<(t=t<e?e:t)?s:t},_angleToValue:function(t){var e=this.options,i=e.min,e=e.max;return(t-this._start)/this._arcLength*(e-i)+i},_valueToAngle:function(t){var e=this.options,i=e.min;return(t-i)/(e.max-i)*this._arcLength+this._start},_appendHiddenField:function(){var t=this._hiddenField=this._hiddenField||this._createElement("input");t.attr({type:"hidden",name:this._dataElement()[0].id||""}),this.control.append(t),this._updateHidden()},_updateHidden:function(){var t=this.options.value;this._hiddenField.val(t)},_updateTooltip:function(){var t=this.options,e=this.tooltip;e&&(e.hasClass("rs-hover")||e.html(this._getTooltipValue()),this._updateTooltipPos()),!t.showTooltip&&t.mouseScrollAction&&this.control.height()},_updateTooltipPos:function(){var t,e,i=this.options,s=i.circleShape,a={};i.showTooltip&&0!==s.indexOf("quarter")&&((t=this.tooltip).is(":visible")?(t.removeClass("rs-center").addClass("rs-reset"),e=-t.outerHeight()/2,i=-t.outerWidth()/2,t.removeClass("rs-reset"),this._isFullCircle?a={"margin-top":e,"margin-left":i}:"half-top"==s||"half-bottom"==s?a={"margin-left":i}:"half-left"!=s&&"half-right"!=s||(a={"margin-top":e})):t.addClass("rs-center"),t.css(a))},_getTooltipValue:function(t){var e=this.options.value;if(this._rangeSlider){var i=e.split(",");return t?i[0]+" - "+i[1]:this._tooltipValue(i[0],1)+" - "+this._tooltipValue(i[1],2)}return t?e:this._tooltipValue(e)},_tooltipValue:function(t,e){e=this._raise("tooltipFormat",{value:t,handle:this._handleArgs(e)});return null!=e&&"boolean"!=typeof e?e:t},_validateStartAngle:function(){var t=this.options,e=t.startAngle;return(e=(this._isNumber(e)?parseFloat(e):0)%360)<0&&(e+=360),t.startAngle=e},_validateEndAngle:function(){var t=this.options,e=t.startAngle,t=this._calcRelativeValue(t.endAngle,e);return(t%=360)<=e&&(t+=360),t},_updateHandleSize:function(){var t=this.options,e=t.width,i=t.handleSize.split(","),t=this._calcRelativeValue(i[0],e),i=i[1]?this._calcRelativeValue(i[1],e):t,e=(this.sliderThickness-t)/2;this._handles().css({height:i,width:t,margin:-i/2+"px 0 0 "+e+"px"})},_calcRelativeValue:function(t,e){var i=""+t;return t=parseFloat(t),this._isNumber(i)?"+"!==i.charAt(0)&&"-"!==i.charAt(0)||(t+=e):t=e,t},_refreshCircleShape:function(){var t=this.options,e=t.circleShape,i=["full","pie","custom-half","custom-quarter"];-1==i.concat(["half-top","half-bottom","half-left","half-right","quarter-top-left","quarter-top-right","quarter-bottom-right","quarter-bottom-left"]).indexOf(e)&&(e="half"==e?"half-top":"quarter"==e?"quarter-top-left":(this._errorLog('The value "'+e+'" was invalid for the property "circleShape".'),"full")),this._isFullCircle=-1!==i.indexOf(e),t.circleShape=e},_appendOverlay:function(){var t=this.options.circleShape;"pie"==t?this._checkOverlay(".rs-overlay",270):"custom-half"!=t&&"custom-quarter"!=t||(this._checkOverlay(".rs-overlay1",180),"custom-quarter"==t&&this._checkOverlay(".rs-overlay2",this._arcLength))},_checkOverlay:function(t,e){var i=this.container.children(t);0==i.length&&(i=this._createElement("div"+t+" rs-transition rs-bg-color"),this.container.append(i)),i.rsRotate(this._start+e)},_checkDataType:function(){var t,e=this.options;for(t in this._initialOptions)e[t]=this._validatePropValue(t,e[t],!0)},_validateSliderType:function(){var t=this.options,e=t.sliderType;this._rangeSlider=this._showRange=this._minRange=!1,"range"==e?this._rangeSlider=this._showRange=!0:"default"!=e&&(this._showRange=this._minRange=!0,e="min-range"),t.sliderType=e},_updateStartEnd:function(){var t,e,i,s,a,n,r=this.options,o=r.circleShape,h=r.startAngle,l=r.endAngle;"full"!=o&&(e="half",i="-top",s="-bottom",a="-left",n="-right",-1!=o.indexOf(t="quarter")?l="+90":-1!=o.indexOf(e)?l="+180":"pie"==o&&(l="+270"),r.endAngle=l,o==t+i+a||o==e+i?h=0:o==t+i+n||o==e+n?h=90:o==t+s+n||o==e+s?h=180:o!=t+s+a&&o!=e+a||(h=270),r.startAngle=h)},_validateStartEnd:function(){this._start=this._validateStartAngle(),this._end=this._validateEndAngle(),this._arcLength=this._end-this._start},_backupPreValue:function(){this._pre_handle1=this._handle1,this._pre_handle2=this._handle2},_revertPreValue:function(){this._handle1=this._pre_handle1,this._handle2=this._pre_handle2,this.options.value=this._preValue},_validateValue:function(t){return this._backupPreValue(),this._analyzeModelValue(),this._raiseBeforeValueChange(t?"change":"code")?(this._setValue(),this._backupPreValue(),!0):(this._revertPreValue(),!1)},_analyzeModelValue:function(){function t(t){return t=n._isNumber(t)?parseFloat(t):n._defaultValue(),t=n._limitValue(t),{value:t=n._processStepByValue(t),angle:n._valueToAngle(t)}}var e,i,s,a=this.options,n=this,r=(""+a.value).split(",");s=this._rangeSlider?(i=t(r.pop()),e=t(r.pop()),a.allowInvertedRange||e.angle>i.angle&&(i=e),this._handle1=e,this._handle2=i,e.value+","+i.value):(i=this._minRange?2:this._active||1,s=t(r.pop()),(this["_handle"+i]=s).value),a.value=s},_formRangeValue:function(t,e){e=e||this._active;var i=this._handle1.value,s=this._handle2.value;return(1==e?[t,s]:[i,t]).join(",")},_createElement:function(t){t=t.split(".");return d(document.createElement(t[0])).addClass(t[1]||"")},_createSVG:function(t,e){var i=t.split("."),s=i[0],a=i[1],t=document.createElementNS("http://www.w3.org/2000/svg",s);return a&&t.setAttribute("class",i[1]),"path"==s&&((e=e||{}).fill||(e.fill="transparent")),e&&this._setAttribute(t,e),t},_setAttribute:function(t,e){for(var i in e){var s,a=e[i];"class"!==i||(s=t.getAttribute("class"))&&(a+=" "+s),t.setAttribute(i,a)}return t},_append:function(e,t){return t.forEach(function(t){t&&e.appendChild(t)}),e},_isNumber:function(t){return"number"==typeof(t=parseFloat(t))&&!isNaN(t)},_getBrowserName:function(){var t="",e="rs-",i=window.navigator.userAgent;return window.opr&&opr.addons||window.opera||0<=i.indexOf(" OPR/")?t="opera":"undefined"!=typeof InstallTrigger?t="firefox":0<i.indexOf("MSIE ")||0<i.indexOf("Trident/")?t="ie":window.StyleMedia?t="edge":-1!=i.indexOf("Safari")&&-1==i.indexOf("Chrome")?t="safari":window.chrome&&window.chrome.webstore||-1!=i.indexOf("Chrome")?t="chrome":e="",e+t},_isBrowserSupported:function(){if(document.createElementNS)return!0;this._errorLog("Browser not supported")},_checkDeprecated:function(){var t=this.options;this._invertRange&&this._errorLog('You are using "_invertRange" which was deprecated now. Instead please use the "allowInvertedRange" property.'),t.svgMode||this._errorLog('The property "svgMode: false" was deprecated. Avoid the classic mode of slider, and migrate to the SVG mode.')},_errorLog:function(t){console.error(o+" : "+t)},_raise:function(t,e){var i=this.options,s=i[t],a=!0;return(e=e||{}).id=this.id,e.control=this.control,e.options=i,e.$this=this,Object.prototype.hasOwnProperty.call(e,"value")||(e.value=i.value),s&&(e.type=t,"string"==typeof s&&(s=window[s]),d.isFunction(s)&&(a=!1!==(a=s.call(this,e))&&a)),this.control.trigger(d.Event(t,e)),a},_bind:function(t,e,i){d(t).on(e,d.proxy(i,this))},_unbind:function(t,e,i){d(t).off(e,d.proxy(i,this))},_getInstance:function(){return d.data(this._dataElement()[0],o)},_saveInstanceOnElement:function(t){d.data(t,o,this)},_removeData:function(){var t=this._dataElement()[0];d.removeData&&d.removeData(t,o)},_destroyControl:function(){this._isInputType&&this._dataElement().insertAfter(this.control).attr("type","text"),this.control.empty().removeClass("rs-control").height("").width(""),this._removeAnimation(),this._bindControlEvents("_unbind"),this._bindScrollEvents("_unbind")},_updateWidth:function(){this.lastBlock.css("padding",this.options.width)},_readOnly:function(t){this._isReadOnly=t,this.container.removeClass("rs-readonly"),t&&this.container.addClass("rs-readonly")},_validatePropValue:function(t,e,i){var s=this._props();return-1!=d.inArray(t,s.numberType)?e=this._isNumber(e)?parseFloat(e):(i?this.defaults:this.options)[t]:-1!=d.inArray(t,s.booleanType)?e="false"!=e&&!!e:-1!=d.inArray(t,s.stringType)&&(e=(""+e).toLowerCase()),e},_setProp:function(t,e,i){e=this._validatePropValue(t,e);var s=this.options;this._preValue=s.value;var a=s[t];if(i||a!==e){switch(s[t]=e,t){case"startAngle":case"endAngle":this._validateStartEnd(),this._updateSeperator(),this._appendOverlay();case"startValue":this._minRange&&(this._handle1=this._handleDefaults());case"min":case"max":case"step":case"value":this._validateValue()&&(this._updateHidden(),this._updateTooltip(),s.value!==this._preValue&&(this._raiseValueChange("code"),this._updatePre()));break;case"radius":this._setRadius(),this._updateTooltipPos();break;case"width":case"pathWidth":case"rangeWidth":case"borderWidth":this._updateWidth(),this._updateSliderThickness(),this._setRadius(),this._updateHandleSize(),this._refreshSeperator();break;case"handleSize":this._updateHandleSize();break;case"handleShape":this._setHandleShape(a);break;case"handleRotation":this._setValue();break;case"animation":s.animation?this._addAnimation():this._removeAnimation();break;case"showTooltip":s.showTooltip?this._appendTooltip():this._removeTooltip();break;case"editableTooltip":this._tooltipEditable(),this._updateTooltipPos();break;case"tooltipFormat":this._updateTooltip();break;case"rangeColor":case"tooltipColor":this._setTooltipColor(this.tooltip),this._setTooltipColor(this.input);break;case"disabled":s.disabled?this.disable():this.enable();break;case"readOnly":s.readOnly?this._readOnly(!0):s.disabled||this._readOnly(!1);break;case"mouseScrollAction":this._bindScrollEvents(s.mouseScrollAction?"_bind":"_unbind");break;case"lineCap":this._setRadius(),this._refreshSeperator();break;case"circleShape":this._refreshCircleShape(),"full"==s.circleShape&&(s.startAngle=0,s.endAngle="+360");case"sliderType":this._destroyControl(),this._onInit();break;case"svgMode":var n=this.control,r=s;this.destroy(),n[o](r)}return this}},option:function(t,e){return this.set(t,e)},get:function(t){return this.options[t]},set:function(t,e){if(t&&this._getInstance()){var i=this.options;if(d.isPlainObject(t)){var s,a="value",n=void 0!==t.min,r=void 0!==t.max;for(s in(n||r)&&(n&&(i.min=t.min,delete t.min),r&&(i.max=t.max,delete t.max),r=i.value,void 0!==t[a]&&(r=t[a],delete t[a]),this._setProp(a,r,!0)),t)this._setProp(s,t[s])}else if("string"==typeof t){if(void 0===e)return this.get(t);this._setProp(t,e)}return i.svgMode&&(this._isPropsRelatedToSVG(t)&&(this._setSVGAttributes(),this._moveSliderRange()),this._isPropsRelatedToSVGStyles(t)&&this._setSVGStyles()),this}},getValue:function(t){if(this._rangeSlider&&this._isNumber(t)){t=parseFloat(t);if(1==t||2==t)return this["_handle"+t].value}return this.get("value")},setValue:function(t,e){var i,s;this._isNumber(t)&&(this._isNumber(e)&&(this._rangeSlider?(i=parseFloat(e),s=parseFloat(t),t=this._formRangeValue(s,i)):this._minRange||(this._active=e)),this._setProp("value",t))},refreshTooltip:function(){this._updateTooltipPos()},disable:function(){this.options.disabled=!0,this.container.addClass("rs-disabled"),this._readOnly(!0)},enable:function(){var t=this.options;t.disabled=!1,this.container.removeClass("rs-disabled"),t.readOnly||this._readOnly(!1)},destroy:function(){this._getInstance()&&(this._destroyControl(),this._removeData(),this._isInputType&&this.control.remove())}},d.fn.rsRotate=function(t){t=null!=t?"rotate("+t+"deg)":"";return this.css("-webkit-transform",t),this.css("-ms-transform",t),this.css("transform",t),this},h.prototype._polarToCartesian=function(t,e){var i=(e-180)*Math.PI/180,e=this.options.radius;return[e+t*Math.cos(i),e+t*Math.sin(i)].join(" ")},h.prototype._drawArc=function(t,e,i,s){var a=e,n=e<t,r=(e=n?this._end:e)-t==360,o=Math.abs(t-e)<=180?"0":"1",h=s?0:1,l=this._polarToCartesian(i,s?t:e),s=[];return r?(e=this._polarToCartesian(i,(t+e)/2),s.push("A",1,1,0,0,h,e,"A",1,1,0,0,h,l)):(s.push("A",i,i,0,o,h,l),n&&(l=this._start,n=this._polarToCartesian(i,l),s.push("M "+n,this._drawArc(l,a,i)))),s.join(" ")},h.prototype._drawPath=function(t,e,i,s,a){var n=this.options;null==i&&(i=this.centerRadius),null==a&&(a=n.lineCap);var r,o,h,l,d=this._polarToCartesian(i,t),u=["M "+d,this._drawArc(t,e,i)];return this._isNumber(s)&&s!==i&&(r=this._polarToCartesian(s,e),o=this._drawArc(t,e,s,!0),"butt"==a?u.push("L "+r,o,"L "+d,"Z"):"round"==a?u.push("A 1, 1, 0, 0, 1, "+r,o,"A 1, 1, 0, 0, 1, "+d):"square"==a?(l=(n.width+n.borderWidth)/2,h=Math.pow(i,2),n=Math.pow(s,2),i=Math.pow(l,2),s=Math.sqrt(h+i),h=Math.sqrt(n+i),n=this._getArcAngle(l,s),i=this._getArcAngle(l,h),l=this._polarToCartesian(s,e+n),e=this._polarToCartesian(h,e+i),n=this._polarToCartesian(s,t-n),i=this._polarToCartesian(h,t-i),u.push("L "+l,"L "+e,"L "+r,o,"L "+i,"L "+n,"L "+d,"Z")):"none"==a&&u.push("M "+r,o)),u.join(" ")},d.fn[o].prototype=h.prototype});